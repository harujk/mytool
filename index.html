<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FIN Crew Selector</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; }
    select, input[type="radio"] { margin: 10px; padding: 5px; }
    img { max-width: 90%; margin-top: 20px; border: 1px solid #ccc; }
  </style>
</head>
<body>

  <!-- 1. Toggle Switch -->
  <div>
    <label><input type="radio" name="mode" value="Narrow" checked> Narrow</label>
    <label><input type="radio" name="mode" value="Wide"> Wide</label>
  </div>

  <!-- 2. FIN Dropdown -->
  <div>
    <label for="finDropdown">FIN:</label>
    <select id="finDropdown">
      <option value="">-- Select FIN --</option>
    </select>
  </div>

  <!-- 3. Crew Dropdown -->
  <div>
    <label for="crewDropdown">Crew:</label>
    <select id="crewDropdown">
      <option value="">-- Select Crew --</option>
    </select>
  </div>

  <!-- 4. Image Display -->
  <div>
    <img id="fullscreenImage" src="PG0000.jpg" alt="Selected Page">
  </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const modeRadios = document.querySelectorAll('input[name="mode"]');
  const finDropdown = document.getElementById('finDropdown');
  const crewDropdown = document.getElementById('crewDropdown');
  const fullscreenImage = document.getElementById('fullscreenImage');

  // 샘플 데이터 (id = FIN 값, pageNumber = 기본 번호)
  const data = [
    { id: 100, pageNumber: 1 },
    { id: 200, pageNumber: 2 },
    { id: 650, pageNumber: 3 },
    { id: 700, pageNumber: 4 },
    { id: 710, pageNumber: 5 },
    { id: 800, pageNumber: 6 }
  ];

  let currentMode = "Narrow";

  // FIN 옵션 채우기
  function populateFinOptions() {
    finDropdown.innerHTML = '<option value="">-- Select FIN --</option>';
    data.forEach(item => {
      if ((currentMode === "Narrow" && item.id < 700) ||
          (currentMode === "Wide" && item.id >= 700)) {
        const option = document.createElement('option');
        option.value = item.id;
        option.textContent = "FIN " + item.id;
        option.dataset.pageNumber = item.pageNumber;
        finDropdown.appendChild(option);
      }
    });
  }

  // Crew 옵션 채우기
  function populateCrewOptions() {
    crewDropdown.innerHTML = '<option value="">-- Select Crew --</option>';
    if (!finDropdown.value) return;

    if (currentMode === "Narrow") {
      ["1", "2"].forEach((label, index) => {
        const opt = document.createElement('option');
        opt.value = index; // 0, 1
        opt.textContent = label;
        crewDropdown.appendChild(opt);
      });
    } else { // Wide
      const wideOptions = [
        "Crew 3","1/3","2/3","3/3",
        "Crew 4","1/4","2/4","3/4","4/4"
      ];
      wideOptions.forEach((label, index) => {
        const opt = document.createElement('option');
        opt.value = index; // 0 ~ 8
        opt.textContent = label;
        crewDropdown.appendChild(opt);
      });
    }
  }

  // 이미지 업데이트
  function updateImage() {
    const finOption = finDropdown.selectedOptions[0];
    const crewIndex = crewDropdown.value;
    if (!finOption || crewIndex === "") return;

    const basePage = parseInt(finOption.dataset.pageNumber, 10);
    const finalPage = basePage + parseInt(crewIndex, 10);
    const filename = "PG" + finalPage.toString().padStart(4, "0") + ".jpg";
    fullscreenImage.src = filename;
  }

  // 이벤트 바인딩
  modeRadios.forEach(radio => {
    radio.addEventListener('change', function() {
      currentMode = this.value;
      populateFinOptions();
      crewDropdown.innerHTML = '<option value="">-- Select Crew --</option>';
      fullscreenImage.src = "PG0000.jpg";
    });
  });

  finDropdown.addEventListener('change', () => {
    populateCrewOptions();
    fullscreenImage.src = "PG0000.jpg";
  });

  crewDropdown.addEventListener('change', updateImage);

  // 초기 로드
  populateFinOptions();
});
</script>

</body>
</html>
